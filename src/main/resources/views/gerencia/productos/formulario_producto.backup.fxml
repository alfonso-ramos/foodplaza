<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<DialogPane xmlns:fx="http://javafx.com/fxml" 
            fx:controller="asedi.controllers.gerencia.ProductoController"
            stylesheets="@/styles/styles.css"
            prefWidth="600" 
            prefHeight="700">
    
    <header>
        <VBox spacing="10">
            <Text style="-fx-font-size: 1.5em; -fx-font-weight: bold;" 
                  fx:id="txtTitulo" />
            <Text style="-fx-font-size: 0.9em; -fx-text-fill: #666;" 
                  text="Complete los datos del producto" />
        </VBox>
    </header>
    
    <content>
        <GridPane hgap="10" vgap="15" style="-fx-padding: 10;">
            <columnConstraints>
                <ColumnConstraints hgrow="NEVER" minWidth="120"/>
                <ColumnConstraints hgrow="ALWAYS" minWidth="300"/>
            </columnConstraints>
            
            <!-- Nombre -->
            <Label text="Nombre:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
            <VBox GridPane.rowIndex="0" GridPane.columnIndex="1" spacing="2">
                <TextField fx:id="txtNombre" promptText="Nombre del producto" styleClass="text-field"/>
                <Label fx:id="lblErrorNombre" styleClass="error-label"/>
            </VBox>
            
            <!-- Descripción -->
            <Label text="Descripción:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
            <VBox GridPane.rowIndex="1" GridPane.columnIndex="1" spacing="2">
                <TextArea fx:id="txtDescripcion" promptText="Descripción del producto" 
                         wrapText="true" prefRowCount="3" styleClass="text-area"/>
                <Label fx:id="lblErrorDescripcion" styleClass="error-label"/>
            </VBox>
            
            <!-- Precio -->
            <Label text="Precio:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
            <VBox GridPane.rowIndex="2" GridPane.columnIndex="1" spacing="2">
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <TextField fx:id="txtPrecio" promptText="0.00" styleClass="text-field" 
                             style="-fx-pref-width: 150;"/>
                    <Label text="\u0024" style="-fx-text-fill: #666; -fx-font-weight: bold;" />
                </HBox>
                <Label fx:id="lblErrorPrecio" styleClass="error-label"/>
            </VBox>
            
            <!-- Categoría -->
            <Label text="Categoría:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
            <VBox GridPane.rowIndex="3" GridPane.columnIndex="1" spacing="2">
                <ComboBox fx:id="cmbCategoria" promptText="Seleccione una categoría" 
                         styleClass="combo-box"/>
                <Label fx:id="lblErrorCategoria" styleClass="error-label"/>
            </VBox>
            
            <!-- Menú -->
            <Label text="Menú:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
            <VBox GridPane.rowIndex="4" GridPane.columnIndex="1" spacing="2">
                <ComboBox fx:id="cmbMenu" promptText="Seleccione un menú (opcional)" 
                         styleClass="combo-box"/>
                <Label fx:id="lblErrorMenu" styleClass="error-label"/>
            </VBox>
            
            <!-- Disponibilidad -->
            <Label text="Disponibilidad:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
            <VBox GridPane.rowIndex="5" GridPane.columnIndex="1" spacing="2">
                <CheckBox fx:id="chkDisponible" text="Producto disponible" 
                         styleClass="check-box" selected="true"/>
            </VBox>
            
            <!-- Stock -->
            <Label text="Stock:" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
            <VBox GridPane.rowIndex="6" GridPane.columnIndex="1" spacing="2">
                <TextField fx:id="txtStock" promptText="Cantidad en stock" 
                         styleClass="text-field" style="-fx-pref-width: 150;"/>
                <Label fx:id="lblErrorStock" styleClass="error-label"/>
            </VBox>
            
            <!-- Imagen -->
            <Label text="Imagen:" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
            <VBox GridPane.rowIndex="7" GridPane.columnIndex="1" spacing="5">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Button text="Seleccionar imagen" onAction="#seleccionarImagen" 
                           styleClass="btn-secundario"/>
                    <Label fx:id="lblNombreArchivo" text="Ningún archivo seleccionado" 
                           style="-fx-text-fill: #666;"/>
                </HBox>
                <ImageView fx:id="imgVistaPrevia" fitWidth="200" fitHeight="150" 
                         preserveRatio="true" style="-fx-border-color: #ddd; -fx-border-width: 1;">
                    <VBox.margin>
                        <Insets top="5"/>
                    </VBox.margin>
                </ImageView>
                <Label fx:id="lblErrorImagen" styleClass="error-label"/>
            </VBox>
            
            <!-- Botones -->
            <HBox spacing="10" alignment="CENTER_RIGHT" 
                  GridPane.columnSpan="2" GridPane.rowIndex="8" 
                  style="-fx-padding: 15 0 0 0;">
                <Button text="Cancelar" onAction="#cancelar" styleClass="btn-secundario"/>
                <Button text="Guardar Producto" onAction="#guardarProducto" styleClass="btn-primario"/>
            </HBox>
        </GridPane>
    </content>
</DialogPane>
