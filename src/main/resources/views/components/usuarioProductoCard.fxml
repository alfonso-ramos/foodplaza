<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.effect.DropShadow?>

<VBox xmlns="http://javafx.com/javafx/17" 
      xmlns:fx="http://javafx.com/fxml" 
      fx:controller="asedi.controllers.UsuarioProductoCardController" 
      fx:id="root"
      styleClass="producto-card"
      spacing="0"
      alignment="TOP_CENTER">
    
    <!-- Definición del efecto de sombra -->
    <effect>
        <DropShadow color="rgba(0,0,0,0.1)" radius="10" spread="0" offsetX="0" offsetY="2" />
    </effect>
    
    <!-- StackPane principal para el overlay de confirmación -->
    <StackPane fx:id="cardContainer" style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 0;">
        <effect>
            <DropShadow color="rgba(0,0,0,0.1)" radius="10" spread="0" offsetX="0" offsetY="2" />
        </effect>
    
    <!-- Imagen del producto -->
    <StackPane style="-fx-background-color: #f8f9fa; -fx-background-radius: 12 12 0 0;" alignment="CENTER">
        <ImageView fx:id="imagenProducto" 
                 fitHeight="160" 
                 fitWidth="240" 
                 pickOnBounds="true" 
                 preserveRatio="true"
                 style="-fx-background-radius: 12 12 0 0;" />
    </StackPane>
    
    <!-- Contenido de la tarjeta -->
    <VBox spacing="8" style="-fx-padding: 16; -fx-background-radius: 0 0 12 12;">
        <!-- Nombre del producto -->
        <Label fx:id="nombreLabel" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-wrap-text: true; -fx-max-width: 240;" />
        
        <!-- Descripción del producto -->
        <Label fx:id="descripcionLabel" style="-fx-font-size: 13px; -fx-text-fill: #6c757d; -fx-wrap-text: true; -fx-max-width: 240; -fx-pref-height: 40;" />
        
        <!-- Fila de precio y botón -->
        <HBox alignment="CENTER" spacing="12" style="-fx-padding: 8 0 0 0; -fx-alignment: CENTER_LEFT;">
            <!-- Precio -->
            <Label fx:id="precioLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #28a745;" />
            
            <!-- Botón de agregar al carrito -->
            <Button fx:id="agregarButton" 
                    onAction="#agregarAlCarrito" 
                    style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 16; -fx-background-radius: 20; -fx-cursor: hand;">
                Agregar al Carrito
                <HBox.margin>
                    <Insets left="10" right="10" />
                </HBox.margin>
            </Button>
        </HBox>
    </VBox>
    
    </StackPane>
    
    <!-- Etiqueta de no disponible (inicialmente oculta) -->
    <Label fx:id="disponibleLabel" 
           style="-fx-text-fill: #dc3545; -fx-font-size: 12px; -fx-font-weight: bold; -fx-padding: 4 8; -fx-background-color: #f8d7da; -fx-background-radius: 4; -fx-border-radius: 4; -fx-border-color: #f5c6cb; -fx-border-width: 1; -fx-alignment: center;" 
           visible="false" />
</VBox>
